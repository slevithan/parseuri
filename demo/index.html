<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>parseUri demo</title>
  <link rel="stylesheet" href="assets/styles.css">
  <script src="../dist/parseuri.min.js"></script>
  <script src="assets/parseuri-v1.2.2-for-test.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/urijs@1.19.11/src/URI.min.js"></script>
  <script src="assets/run.js"></script>
</head>
<body>
  <h1>
    <a href="https://github.com/slevithan/parseuri"><code>parseUri</code></a> demo
    <span id="version">v2.1.0</span>
  </h1>
  <p><span class="badge">Context:</span>
    <code>parseUri</code> is a mighty but tiny URI/URN/URL parser that splits any URI into its
    parts (all of which are optional). Its combination of accuracy, flexibility, and brevity is
    unrivaled.</p>
  <p><span class="badge">Demo:</span>
    This demo page is for testing and comparing between <code>parseUri</code> v2, v1, the built-in
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL"><code>URL</code></a>
    constructor, and <a href="https://github.com/medialize/URI.js">URI.js</a> (a much larger
    library).</p>
  <p><span class="badge">Parsing modes:</span>
    <code>parseUri</code> has two parsing modes: default and friendly. The default mode follows
    official URI rules. Friendly mode doesn’t require <code>'&lt;protocol>:'</code>,
    <code>':'</code>, or <code>'//'</code> to signal the start of an authority, which allows
    handling human-friendly URLs like <code>'example.com/file.html'</code> as expected. However,
    it also precludes friendly mode from properly handling relative paths (that don’t start from
    root <code>'/'</code>) such as <code>'dir/file.html'</code>.</p>
  <details>
    <summary>Show more details</summary>
    <p><span class="badge">Normalization:</span>
      Unlike JavaScript’s built-in <code>URL</code> constructor and some other libraries,
      <code>parseUri</code> doesn’t normalize or encode results (normalization often differs
      between libraries and might or might not include encoding). In the results table, values that
      match <code>parseUri</code> in default mode after applying a library’s own normalization to
      the full URI are shown in <span class="badge similar">light green</span>.</p>
    <p><span class="badge">Results:</span>
      <code>parseUri</code> makes a best case effort even with partial or invalid URIs. Compare
      this to JavaScript’s built-in <code>URL</code> constructor which throws e.g. if not given a
      protocol, and in many other cases of valid (but not supported) and invalid URIs. URI.js
      throws with some but not all invalid URIs (e.g. it throws if given port <code>0</code>, which
      is in fact valid with UDP).</p>
    <p>Here’s an illustration of what a <code>parseUri</code> result object’s properties
      contain and how they overlap:</p>
    <p class="ascii-chart">┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                  href                                                    │
├────────────────────────────────────────────────────────────────┬─────────────────────────────────────────┤
│                             origin                             │                resource                 │
├──────────┬─┬───────────────────────────────────────────────────┼──────────────────────┬───────┬──────────┤
│ protocol │ │                     authority                     │       pathname       │ query │ fragment │
│          │ ├─────────────────────┬─────────────────────────────┼───────────┬──────────┤       │          │
│          │ │      userinfo       │            host             │ directory │ filename │       │          │
│          │ ├──────────┬──────────┼──────────────────────┬──────┤           ├─┬────────┤       │          │
│          │ │ username │ password │       hostname       │ port │           │ │ suffix │       │          │
│          │ │          │          ├───────────┬──────────┤      │           │ ├────────┤       │          │
│          │ │          │          │ subdomain │  domain  │      │           │ │        │       │          │
│          │ │          │          │           ├────┬─────┤      │           │ │        │       │          │
│          │ │          │          │           │    │ tld │      │           │ │        │       │          │
"  https   ://   user   :   pass   @ sub1.sub2 . dom.com  : 8080   /p/a/t/h/  a.html    ?  q=1  #   hash   "
└──────────────────────────────────────────────────────────────────────────────────────────────────────────┘</p>
    <p><code>parseUri</code> additionally supports IPv4 and IPv6 addresses, URNs, and many edge
      cases not shown here. It also includes extensible support for second-level domains that
      should be treated as part of the top-level domain.</p>
    <p><span class="badge">About:</span>
      This page simultaneously presents up to eight result set comparisons <i>(v2 default/friendly,
      v1 strict/loose, v2 default/v1 strict, v2 friendly/v1 loose, URL/v2-default,
      URL/v2-default-normalized-by-URL, URI.js/v2-default, URI.js/v2-default-normalized-by-URI.js)</i>
      across 21 properties that use four different sets of partially-overlapping property names
      (from v2, v1, <code>URL</code>, and URI.js objects). It also shows when <code>URL</code> or
      URI.js throw, highlights when default and friendly mode are totally equal, and highlights when
      the <code>queryParams</code> object represents the same values in different formats across
      libraries (there are three formats across the different results: <code>parseUri</code> v2 and
      <code>URL</code> use
      <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a>,
      <code>parseUri</code> v1 uses an object with string values, and URI.js uses an object whose
      values can be strings, arrays, and/or nulls).</p>
  </details>
  <p>
    <span class="badge">Options:</span>
    <small>
      <label><input id="compareV1" type="checkbox" oninput="setOption(this.id, this.checked)"> Show differences from v1.2.2</label>
      <label><input id="useSlds" type="checkbox" oninput="setOption(this.id, this.checked)"> Use second-level domain list (ex: <code>.co.uk</code>)</label>
    </small>
  </p>
  <div class="table-container">
    <div>
      <input type="text" id="uri-input" oninput="setInput(this.value)" placeholder="Type URI...">
    </div>
    <table id="uri-table">
      <thead>
        <tr>
          <th>Key</th>
          <th><code>parseUri</code> <small class="fw-normal">[default]</small></th>
          <th>
            <label>
              <input id="friendlyMode" type="checkbox" oninput="setOption(this.id, this.checked)">
              <code>parseUri</code> <small class="fw-normal">[friendly]</small>
            </label>
          </th>
          <th>
            <label>
              <input id="urlStandard" type="checkbox" oninput="setOption(this.id, this.checked)">
              <code>URL</code>
            </label>
          </th>
          <th>
            <label>
              <input id="uriJs" type="checkbox" oninput="setOption(this.id, this.checked)">
              <small><code>URI.js</code></small>
            </label>
          </th>
        </tr>
      </thead>
      <tbody>
        <!-- input for uri-table goes here -->
      </tbody>
    </table>
  </div>
  <!-- Bootstrap Icons SVG sprite: <https://icons.getbootstrap.com/> -->
  <svg xmlns="http://www.w3.org/2000/svg" class="hidden">
    <symbol id="info-icon" viewBox="0 0 16 16">
      <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
    </symbol>
    <symbol id="warning-icon" viewBox="0 0 16 16">
      <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
    </symbol>
    <symbol id="x-icon" viewBox="0 0 16 16">
      <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708"/>
    </symbol>
  </svg>
</body>
</html>
